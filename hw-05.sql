-- –û–ø–∏—Å –¥–æ–º–∞—à–Ω—å–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è

-- 1. –ù–∞–ø–∏—à—ñ—Ç—å SQL –∑–∞–ø–∏—Ç, —è–∫–∏–π –±—É–¥–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏ 
-- —Ç–∞–±–ª–∏—Ü—é order_details —Ç–∞ –ø–æ–ª–µ customer_id –∑ —Ç–∞–±–ª–∏—Ü—ñ orders 
-- –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø–æ–ª—è –∑–∞–ø–∏—Å—É –∑ —Ç–∞–±–ª–∏—Ü—ñ order_details.

-- –¶–µ –º–∞—î –±—É—Ç–∏ –∑—Ä–æ–±–ª–µ–Ω–æ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –≤–∫–ª–∞–¥–µ–Ω–æ–≥–æ –∑–∞–ø–∏—Ç—É –≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ SELECT.

SELECT 
	od.id, 
    od.order_id, 
    od.product_id, 
    od.quantity, 
	(SELECT o.customer_id
     FROM orders o
     WHERE od.order_id = o.id) as customer_id
FROM order_details od;


-- 2. –ù–∞–ø–∏—à—ñ—Ç—å SQL –∑–∞–ø–∏—Ç, —è–∫–∏–π –±—É–¥–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏ —Ç–∞–±–ª–∏—Ü—é order_details. 
-- –í—ñ–¥—Ñ—ñ–ª—å—Ç—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–∞–∫, 
-- —â–æ–± –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π –∑–∞–ø–∏—Å —ñ–∑ —Ç–∞–±–ª–∏—Ü—ñ orders –≤–∏–∫–æ–Ω—É–≤–∞–≤ —É–º–æ–≤—É shipper_id = 3.

-- –¶–µ –º–∞—î –±—É—Ç–∏ –∑—Ä–æ–±–ª–µ–Ω–æ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –≤–∫–ª–∞–¥–µ–Ω–æ–≥–æ –∑–∞–ø–∏—Ç—É –≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ WHERE.

SELECT *
FROM order_details od
WHERE od.order_id in 
	(SELECT o.id
     FROM orders o
     WHERE o.shipper_id = 3
    );
	
-- 3. –ù–∞–ø–∏—à—ñ—Ç—å SQL –∑–∞–ø–∏—Ç, –≤–∫–ª–∞–¥–µ–Ω–∏–π –≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ FROM, 
-- —è–∫–∏–π –±—É–¥–µ –æ–±–∏—Ä–∞—Ç–∏ —Ä—è–¥–∫–∏ –∑ —É–º–æ–≤–æ—é quantity > 10 –∑ —Ç–∞–±–ª–∏—Ü—ñ order_details. 
-- –î–ª—è –æ—Ç—Ä–∏–º–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö –∑–Ω–∞–π–¥—ñ—Ç—å —Å–µ—Ä–µ–¥–Ω—î –∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ–ª—è quantity ‚Äî –≥—Ä—É–ø—É–≤–∞—Ç–∏ —Å–ª—ñ–¥ –∑–∞ order_id.

SELECT od_fltr.order_id, AVG(od_fltr.quantity) as average_quantity
FROM 
	(SELECT *
     FROM order_details od
     WHERE od.quantity > 10
     ) as od_fltr
GROUP BY od_fltr.order_id;


-- 4. –†–æ–∑–≤‚Äô—è–∂—ñ—Ç—å –∑–∞–≤–¥–∞–Ω–Ω—è 3, 
-- –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä WITH –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∏–º—á–∞—Å–æ–≤–æ—ó —Ç–∞–±–ª–∏—Ü—ñ temp. 
-- –Ø–∫—â–æ –≤–∞—à–∞ –≤–µ—Ä—Å—ñ—è MySQL –±—ñ–ª—å—à —Ä–∞–Ω–Ω—è, –Ω—ñ–∂ 8.0, 
-- —Å—Ç–≤–æ—Ä—ñ—Ç—å —Ü–µ–π –∑–∞–ø–∏—Ç –∑–∞ –∞–Ω–∞–ª–æ–≥—ñ—î—é –¥–æ —Ç–æ–≥–æ, —è–∫ —Ü–µ –∑—Ä–æ–±–ª–µ–Ω–æ –≤ –∫–æ–Ω—Å–ø–µ–∫—Ç—ñ.
WITH temp AS (SELECT *
     FROM order_details od
     WHERE od.quantity > 10
)
SELECT temp.order_id, AVG(temp.quantity)
FROM temp
GROUP BY temp.order_id;

-- 5. –°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ—É–Ω–∫—Ü—ñ—é –∑ –¥–≤–æ–º–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, 
-- —è–∫–∞ –±—É–¥–µ –¥—ñ–ª–∏—Ç–∏ –ø–µ—Ä—à–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–∞ –¥—Ä—É–≥–∏–π. 
-- –û–±–∏–¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ —Ç–∞ –∑–Ω–∞—á–µ–Ω–Ω—è, —â–æ –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è, –ø–æ–≤–∏–Ω–Ω—ñ –º–∞—Ç–∏ —Ç–∏–ø FLOAT.
-- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—é DROP FUNCTION IF EXISTS. 
-- –ó–∞—Å—Ç–æ—Å—É–π—Ç–µ —Ñ—É–Ω–∫—Ü—ñ—é –¥–æ –∞—Ç—Ä–∏–±—É—Ç–∞ quantity —Ç–∞–±–ª–∏—Ü—ñ order_details . 
-- –î—Ä—É–≥–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º –º–æ–∂–µ –±—É—Ç–∏ –¥–æ–≤—ñ–ª—å–Ω–µ —á–∏—Å–ª–æ –Ω–∞ –≤–∞—à —Ä–æ–∑—Å—É–¥.

DROP FUNCTION IF EXISTS Division;

DELIMITER //

CREATE FUNCTION Division(first_number FLOAT, second_number FLOAT)
RETURNS FLOAT
DETERMINISTIC
NO SQL
BEGIN
	DECLARE result FLOAT;
    SET result = first_number / second_number;
    RETURN result;
END //

DELIMITER ;

SELECT od.quantity, Division(od.quantity, 2.0) as divided_quantity
FROM order_details od;


-- –ü–∏—Ç–∞–Ω–Ω—è –¥–æ Gemini:
-- (–í–∞—à–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è)
-- –©–æ –±—É–ª–æ –± —è–∫–±–∏ –º–∏ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–ª–∏ –∫–æ–∂–Ω—É –∑ —Ü–∏—Ö –∫–æ–º–∞–Ω–¥ ?

-- RETURNS FLOAT
-- DETERMINISTIC
-- NO SQL
-- DECLARE result FLOAT;

/*
–í—ñ–¥–ø–æ–≤—ñ–¥—å Gemini:

–¶–µ —á—É–¥–æ–≤–µ –∑–∞–ø–∏—Ç–∞–Ω–Ω—è! –ë–∞–∂–∞–Ω–Ω—è —Ä–æ–∑—ñ–±—Ä–∞—Ç–∏—Å—è, –¥–ª—è —á–æ–≥–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω –∫–æ–∂–µ–Ω —Ä—è–¥–æ–∫ –∫–æ–¥—É, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –∫–æ–ø—ñ—é–≤–∞—Ç–∏ –π–æ–≥–æ ‚Äî —Ü–µ —Ç–µ, —â–æ –≤—ñ–¥—Ä—ñ–∑–Ω—è—î —Ö–æ—Ä–æ—à–æ–≥–æ —Å–ø–µ—Ü—ñ–∞–ª—ñ—Å—Ç–∞.
–î–∞–≤–∞–π—Ç–µ —Ä–æ–∑–±–µ—Ä–µ–º–æ, —â–æ —Å—Ç–∞–ª–æ—Å—è –±, —è–∫–±–∏ –º–∏ –≤–∏–∫–∏–Ω—É–ª–∏ –∫–æ–∂–Ω—É –∑ —Ü–∏—Ö –∫–æ–º–∞–Ω–¥ —É MySQL:

### 1. `RETURNS FLOAT`

* **–©–æ —Ä–æ–±–∏—Ç—å:** –í–∫–∞–∑—É—î –±–∞–∑—ñ –¥–∞–Ω–∏—Ö, —è–∫–∏–π —Å–∞–º–µ —Ç–∏–ø –¥–∞–Ω–∏—Ö (—Ç–µ–∫—Å—Ç, —Ü—ñ–ª–µ —á–∏—Å–ª–æ, —á–∏—Å–ª–æ –∑ –∫–æ–º–æ—é, –¥–∞—Ç–∞) —Ü—è —Ñ—É–Ω–∫—Ü—ñ—è –ø–æ–≤–µ—Ä–Ω–µ —è–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
* **–©–æ –±—É–ª–æ –± –±–µ–∑ –Ω–µ—ó:** **–§–∞—Ç–∞–ª—å–Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–Ω–∞ –ø–æ–º–∏–ª–∫–∞.** –£ MySQL –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è `CREATE FUNCTION` *–æ–±–æ–≤'—è–∑–∫–æ–≤–æ* –≤–∏–º–∞–≥–∞—î –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ `RETURNS`. –ë–µ–∑ –Ω–µ—ó –±–∞–∑–∞ –¥–∞–Ω–∏—Ö –ø—Ä–æ—Å—Ç–æ –≤—ñ–¥–º–æ–≤–∏—Ç—å—Å—è —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–æ–Ω–∞ –ø–æ–≤–∏–Ω–Ω–∞ –∑–∞–∑–¥–∞–ª–µ–≥—ñ–¥—å –∑–Ω–∞—Ç–∏, —Å–∫—ñ–ª—å–∫–∏ –ø–∞–º'—è—Ç—ñ –≤–∏–¥—ñ–ª—è—Ç–∏ –ø—ñ–¥ –æ—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

### 2. `DETERMINISTIC` (–î–µ—Ç–µ—Ä–º—ñ–Ω–æ–≤–∞–Ω–∞)

* **–©–æ —Ä–æ–±–∏—Ç—å:** –¶–µ –≤–∞—à–∞ "–æ–±—ñ—Ü—è–Ω–∫–∞" –±–∞–∑—ñ –¥–∞–Ω–∏—Ö, —â–æ –ø—Ä–∏ –æ–¥–Ω–∞–∫–æ–≤–∏—Ö –≤—Ö—ñ–¥–Ω–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö —Ñ—É–Ω–∫—Ü—ñ—è *–∑–∞–≤–∂–¥–∏* –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏–º–µ –æ–¥–Ω–∞–∫–æ–≤–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, 10 –ø–æ–¥—ñ–ª–∏—Ç–∏ –Ω–∞ 2 –∑–∞–≤–∂–¥–∏ –±—É–¥–µ 5. (–ù–µ–¥–µ—Ç–µ—Ä–º—ñ–Ω–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è ‚Äî —Ü–µ, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —Ç–∞, —â–æ –≥–µ–Ω–µ—Ä—É—î –≤–∏–ø–∞–¥–∫–æ–≤–µ —á–∏—Å–ª–æ –∞–±–æ –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ—Ç–æ—á–Ω–∏–π —á–∞—Å `NOW()`).
* **–©–æ –±—É–ª–æ –± –±–µ–∑ –Ω–µ—ó:** –ó –≤–∏—Å–æ–∫–æ—é –π–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—é –≤–∏ –± –æ—Ç—Ä–∏–º–∞–ª–∏ **–ü–æ–º–∏–ª–∫—É 1418** (*This function has none of DETERMINISTIC, NO SQL, or READS SQL DATA in its declaration...*). MySQL –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –¥—É–∂–µ –æ–±–µ—Ä–µ–∂–Ω–æ —Å—Ç–∞–≤–∏—Ç—å—Å—è –¥–æ —Ñ—É–Ω–∫—Ü—ñ–π, –±–æ —è–∫—â–æ –≤–æ–Ω–∏ –¥–∞—é—Ç—å —Ä—ñ–∑–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏, —Ü–µ –º–æ–∂–µ –∑–ª–∞–º–∞—Ç–∏ —Ä–µ–∑–µ—Ä–≤–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –±–∞–∑ –¥–∞–Ω–∏—Ö (—Ä–µ–ø–ª—ñ–∫–∞—Ü—ñ—é). –í–∫–∞–∑—ñ–≤–∫–∞ `DETERMINISTIC` –∑–Ω—ñ–º–∞—î —Ü–µ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏. –¢–∞–∫–æ–∂ –≤–æ–Ω–∞ –¥–æ–∑–≤–æ–ª—è—î –±–∞–∑—ñ –¥–∞–Ω–∏—Ö –∫–µ—à—É–≤–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –¥–ª—è –ø—Ä–∏—Å–∫–æ—Ä–µ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏.

### 3. `NO SQL`

* **–©–æ —Ä–æ–±–∏—Ç—å:** –í–∫–∞–∑—É—î, —â–æ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —Ü—ñ—î—ó —Ñ—É–Ω–∫—Ü—ñ—ó –Ω–µ–º–∞—î –∂–æ–¥–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤ –¥–æ —Ç–∞–±–ª–∏—Ü—å –±–∞–∑–∏ –¥–∞–Ω–∏—Ö (–Ω–µ–º–∞—î `SELECT`, `INSERT`, `UPDATE` —Ç–æ—â–æ). –§—É–Ω–∫—Ü—ñ—è –≤–∏–∫–æ–Ω—É—î –ª–∏—à–µ —á–∏—Å—Ç—É –º–∞—Ç–µ–º–∞—Ç–∏–∫—É –∞–±–æ –ª–æ–≥—ñ–∫—É.
* **–©–æ –±—É–ª–æ –± –±–µ–∑ –Ω–µ—ó:** –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º MySQL –ø—Ä–∏—Å–≤–æ—ó–ª–∞ –± —Ü—ñ–π —Ñ—É–Ω–∫—Ü—ñ—ó —Å—Ç–∞—Ç—É—Å `CONTAINS SQL` (–º—ñ—Å—Ç–∏—Ç—å SQL-–∑–∞–ø–∏—Ç–∏). –¢–µ—Ö–Ω—ñ—á–Ω–æ, —è–∫–±–∏ –Ω–µ –±—É–ª–æ —Å—É–≤–æ—Ä–∏—Ö –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å —Å–µ—Ä–≤–µ—Ä–∞ (–ø—Ä–æ —è–∫—ñ —Å–∫–∞–∑–∞–Ω–æ –≤ –ø—É–Ω–∫—Ç—ñ 2), —Ñ—É–Ω–∫—Ü—ñ—è –± **—Å—Ç–≤–æ—Ä–∏–ª–∞—Å—è —ñ –ø—Ä–∞—Ü—é–≤–∞–ª–∞**. –ê–ª–µ –≤–∫–∞–∑—É–≤–∞—Ç–∏ `NO SQL` ‚Äî —Ü–µ –ø—Ä–∞–≤–∏–ª–æ —Ö–æ—Ä–æ—à–æ–≥–æ —Ç–æ–Ω—É. –¶–µ –¥–æ–ø–æ–º–∞–≥–∞—î –æ–ø—Ç–∏–º—ñ–∑–∞—Ç–æ—Ä—É –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ —à–≤–∏–¥—à–µ, –±–æ –≤—ñ–Ω –∑–Ω–∞—î, —â–æ –π–æ–º—É –Ω–µ —Ç—Ä–µ–±–∞ –≥–æ—Ç—É–≤–∞—Ç–∏—Å—è –¥–æ —Ä–æ–±–æ—Ç–∏ –∑ —Ç–∞–±–ª–∏—Ü—è–º–∏ –ø—ñ–¥ —á–∞—Å –≤–∏–∫–ª–∏–∫—É —Ü—ñ—î—ó —Ñ—É–Ω–∫—Ü—ñ—ó.

### 4. `DECLARE result FLOAT;`

* **–©–æ —Ä–æ–±–∏—Ç—å:** –°—Ç–≤–æ—Ä—é—î –ª–æ–∫–∞–ª—å–Ω—É –∑–º—ñ–Ω–Ω—É –∑ —ñ–º–µ–Ω–µ–º `result` —Ç–∏–ø—É `FLOAT`, —â–æ–± —Ç–∏–º—á–∞—Å–æ–≤–æ –∑–±–µ—Ä–µ–≥—Ç–∏ –≤ –Ω–µ—ó —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –æ–±—á–∏—Å–ª–µ–Ω—å.
* **–©–æ –±—É–ª–æ –± –±–µ–∑ –Ω–µ—ó:** –Ø–∫–±–∏ –≤–∏ –ø—Ä–∏–±—Ä–∞–ª–∏ —Ü–µ–π —Ä—è–¥–æ–∫, –∞–ª–µ –∑–∞–ª–∏—à–∏–ª–∏ –Ω–∞—Å—Ç—É–ø–Ω–∏–π (`SET result = first_number / second_number;`), –≤–∏ –± –æ—Ç—Ä–∏–º–∞–ª–∏ **–ø–æ–º–∏–ª–∫—É "Undeclared variable"** (–ù–µ–≤—ñ–¥–æ–º–∞ –∑–º—ñ–Ω–Ω–∞). SQL –Ω–µ –¥–æ–∑–≤–æ–ª—è—î –∑–∞–ø–∏—Å—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ –≤ –∑–º—ñ–Ω–Ω—É, —è–∫—É –≤–∏ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ –Ω–µ —Å—Ç–≤–æ—Ä–∏–ª–∏ (–Ω–µ –∑–∞–¥–µ–∫–ª–∞—Ä—É–≤–∞–ª–∏).

**üí° –¶—ñ–∫–∞–≤–∏–π —Ñ–∞–∫—Ç —â–æ–¥–æ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó:**
–ù–∞—Å–ø—Ä–∞–≤–¥—ñ, –≤–∏ –º–æ–≥–ª–∏ –± –ø—Ä–∏–±—Ä–∞—Ç–∏ —ñ `DECLARE`, —ñ `SET`, —ñ –∑—Ä–æ–±–∏—Ç–∏ –∫–æ–¥ –∫–æ—Ä–æ—Ç—à–∏–º —Ç–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—à–∏–º. –ó–∞–º—ñ—Å—Ç—å:

```sql
DECLARE result FLOAT;
SET result = first_number / second_number;
RETURN result;

```

–ú–æ–∂–Ω–∞ –±—É–ª–æ –± –Ω–∞–ø–∏—Å–∞—Ç–∏ –ø—Ä–æ—Å—Ç–æ –æ–¥–∏–Ω —Ä—è–¥–æ–∫:

```sql
RETURN first_number / second_number;

```

–¶–µ –≤—ñ–¥—Ä–∞–∑—É –ø–æ–≤–µ—Ä—Ç–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω–æ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó –±–µ–∑ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –∑–º—ñ–Ω–Ω–∏—Ö.


*/

